<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Storm Checker Pro - Premium Edition</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700;800&family=Kanit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="script.js"></script>
</head>
<body>
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-spinner"></div>
        <div class="loading-text">
            <span>‚õàÔ∏è</span>
            <span>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î Storm Checker Pro</span>
            <div class="loading-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </div>

    <div class="sky-container" id="skyContainer">
        <div class="sun" id="sun"></div>
        <div class="moon" id="moon"></div>
        <div class="clouds" id="clouds"></div>
    </div>

    <div class="container">
        <!-- Left Sidebar -->
        <div class="sidebar">
            <div class="card storm-card">
                <div class="card-header">
                    <div class="icon">‚õàÔ∏è</div>
                    <span>Storm Checker Pro</span>
                </div>
                <div class="version-badge">Premium v2.0</div>
            </div>

            <div class="card signal-card">
                <div class="card-header">
                    <div class="icon">üì°</div>
                    <span>Signal</span>
                </div>

                <div class="network-stats">
                    <div class="stat-item">
                        <div class="stat-icon">‚è±Ô∏è</div>
                        <div class="stat-label">Delay:</div>
                        <div class="stat-value delay-value" id="delay">0.0 ms</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">üì∂</div>
                        <div class="stat-label">Ping:</div>
                        <div class="stat-value ping-value" id="ping">999 ms</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">üåê</div>
                        <div class="stat-label">API Status:</div>
                        <div class="stat-value" id="apiStatus">--</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">üì°</div>
                        <div class="stat-label">Connection:</div>
                        <div class="stat-value" id="connectionStatus">--</div>
                    </div>
                </div>
            </div>

            <!-- NEW: Air Quality Card -->
            <div class="card air-quality-card">
                <div class="card-header">
                    <div class="icon">üå´Ô∏è</div>
                    <span>‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</span>
                </div>
                <div class="aqi-display">
                    <div class="aqi-value" id="aqiValue">--</div>
                    <div class="aqi-label" id="aqiLabel">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
                    <div class="aqi-bar">
                        <div class="aqi-fill" id="aqiFill"></div>
                    </div>
                </div>
                <div class="aqi-details">
                    <div class="aqi-detail-item">
                        <span>PM2.5:</span>
                        <span id="pm25">-- ¬µg/m¬≥</span>
                    </div>
                    <div class="aqi-detail-item">
                        <span>PM10:</span>
                        <span id="pm10">-- ¬µg/m¬≥</span>
                    </div>
                    <div class="aqi-detail-item">
                        <span>O‚ÇÉ:</span>
                        <span id="o3">-- ¬µg/m¬≥</span>
                    </div>
                </div>
            </div>

            <!-- Weather Alerts Card -->
            <div class="card weather-alerts-card" id="weatherAlertsCard" style="display: none;">
                <div class="card-header">
                    <div class="icon alert-icon">‚ö†Ô∏è</div>
                    <span>‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</span>
                </div>
                <div id="weatherAlerts"></div>
            </div>

            <!-- NEW: Comfort Index Card -->
            <div class="card comfort-card">
                <div class="card-header">
                    <div class="icon">üå°Ô∏è</div>
                    <span>‡∏î‡∏±‡∏ä‡∏ô‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ö‡∏≤‡∏¢</span>
                </div>
                <div class="comfort-display">
                    <div class="comfort-emoji" id="comfortEmoji">üòä</div>
                    <div class="comfort-text" id="comfortText">‡∏™‡∏ö‡∏≤‡∏¢</div>
                    <div class="comfort-description" id="comfortDesc">‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏à‡πâ‡∏á</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="icon">‚ö°</div>
                    <span>Actions</span>
                </div>
                <div class="action-buttons">
                    <button class="action-btn refresh" id="refreshBtn" onclick="refreshWeatherData()">
                        <span class="action-btn-icon">üîÑ</span>
                        <span>‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà</span>
                    </button>
                    <button class="action-btn" onclick="openCityCompare()">
                        <span class="action-btn-icon">üåç</span>
                        <span>‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÄ‡∏°‡∏∑‡∏≠‡∏á</span>
                    </button>
                    <button class="action-btn" onclick="shareWeather()">
                        <span class="action-btn-icon">üì§</span>
                        <span>‡πÅ‡∏ä‡∏£‡πå‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</span>
                    </button>
                    <button class="action-btn" onclick="resetAPI()">
                        <span class="action-btn-icon">üîÑ</span>
                        <span>‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï API</span>
                    </button>
                    <button class="action-btn" onclick="openSettings()">
                        <span class="action-btn-icon">‚öôÔ∏è</span>
                        <span>Settings</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Section -->
        <div class="main-section">
            <div class="main-checker">
                <div class="main-header">
                    <div class="icon">‚õàÔ∏è</div>
                    <h2>Main Checker</h2>
                    <div class="location-display" id="locationDisplay">
                        <span class="location-icon">üìç</span>
                        <span id="currentLocation">Chiang Mai</span>
                    </div>
                </div>

                <div class="weather-main-display">
                    <div class="temp-section">
                        <div class="animated-weather-icon" id="animatedWeatherIcon">
                            <div class="weather-animation sunny">‚òÄÔ∏è</div>
                        </div>
                        <div class="temp-display">
                            <span class="temp-value" id="mainTemp">24</span>
                            <span class="temp-unit">¬∞</span>
                        </div>
                        <div class="feels-like-display">
                            <span class="feels-like-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å: </span>
                            <span class="feels-like-value" id="feelsLike">24¬∞</span>
                        </div>
                    </div>
                </div>

                <!-- Advanced Weather Info Grid -->
                <div class="advanced-weather-grid">
                    <div class="weather-info-item">
                        <div class="weather-info-icon">üí®</div>
                        <div class="weather-info-content">
                            <div class="weather-info-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏•‡∏°</div>
                            <div class="weather-info-value" id="windSpeed">0 km/h</div>
                        </div>
                    </div>
                    <div class="weather-info-item">
                        <div class="weather-info-icon">üß≠</div>
                        <div class="weather-info-content">
                            <div class="weather-info-label">‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏•‡∏°</div>
                            <div class="weather-info-value" id="windDirection">--</div>
                        </div>
                    </div>
                    <div class="weather-info-item">
                        <div class="weather-info-icon">üå°Ô∏è</div>
                        <div class="weather-info-content">
                            <div class="weather-info-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏î‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</div>
                            <div class="weather-info-value" id="pressure">0 hPa</div>
                        </div>
                    </div>
                    <div class="weather-info-item">
                        <div class="weather-info-icon">‚òÄÔ∏è</div>
                        <div class="weather-info-content">
                            <div class="weather-info-label">UV Index</div>
                            <div class="weather-info-value" id="uvIndex">--</div>
                        </div>
                    </div>
                    <div class="weather-info-item">
                        <div class="weather-info-icon">üëÅÔ∏è</div>
                        <div class="weather-info-content">
                            <div class="weather-info-label">‡∏ó‡∏±‡∏®‡∏ô‡∏ß‡∏¥‡∏™‡∏±‡∏¢</div>
                            <div class="weather-info-value" id="visibility">-- km</div>
                        </div>
                    </div>
                    <div class="weather-info-item">
                        <div class="weather-info-icon">üíß</div>
                        <div class="weather-info-content">
                            <div class="weather-info-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô</div>
                            <div class="weather-info-value" id="humidity">-- %</div>
                        </div>
                    </div>
                    <div class="weather-info-item">
                        <div class="weather-info-icon">üåÖ</div>
                        <div class="weather-info-content">
                            <div class="weather-info-label">‡∏û‡∏£‡∏∞‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡∏Ç‡∏∂‡πâ‡∏ô</div>
                            <div class="weather-info-value" id="sunrise">--:--</div>
                        </div>
                    </div>
                    <div class="weather-info-item">
                        <div class="weather-info-icon">üåá</div>
                        <div class="weather-info-content">
                            <div class="weather-info-label">‡∏û‡∏£‡∏∞‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡∏ï‡∏Å</div>
                            <div class="weather-info-value" id="sunset">--:--</div>
                        </div>
                    </div>
                </div>

                <!-- NEW: Weather Chart -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>üìä ‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏≤‡∏Å‡∏≤‡∏® 7 ‡∏ß‡∏±‡∏ô</h3>
                        <div class="chart-tabs">
                            <button class="chart-tab active" onclick="switchChartView('temp')">‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥</button>
                            <button class="chart-tab" onclick="switchChartView('humidity')">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô</button>
                        </div>
                    </div>
                    <canvas id="weatherChart"></canvas>
                </div>

                <div class="forecast-label">‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏ß‡∏±‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤</div>

                <div class="forecast-wrapper">
                    <div class="forecast-section">
                        <div class="forecast-section-label">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
                        <div class="forecast-container" id="forecastContainerToday"></div>
                    </div>
                    <div class="forecast-section">
                        <div class="forecast-section-label">‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ</div>
                        <div class="forecast-container" id="forecastContainerTomorrow"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal">
            <div class="modal-header">
                <h3>
                    <span>‚öôÔ∏è</span>
                    <span>Settings</span>
                </h3>
                <button class="modal-close" onclick="closeSettings()">‚úï</button>
            </div>
            <div class="modal-content">
                <div class="setting-item">
                    <div class="setting-label">
                        <span>üé®</span>
                        <span>‡∏ò‡∏µ‡∏° (Theme)</span>
                    </div>
                    <div class="theme-selector">
                        <div class="theme-option active" data-theme="dark" onclick="selectTheme('dark')">
                            <div class="theme-option-icon">üåô</div>
                            <div class="theme-option-name">Dark Mode</div>
                        </div>
                        <div class="theme-option" data-theme="light" onclick="selectTheme('light')">
                            <div class="theme-option-icon">‚òÄÔ∏è</div>
                            <div class="theme-option-name">Light Mode</div>
                        </div>
                        <div class="theme-option" data-theme="galaxy" onclick="selectTheme('galaxy')">
                            <div class="theme-option-icon">üåå</div>
                            <div class="theme-option-name">Galaxy Mode</div>
                        </div>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-label">
                        <span>üìç</span>
                        <span>Auto Detect Location</span>
                    </div>
                    <div class="setting-toggle">
                        <div class="toggle-switch active" id="autoDetectToggle" onclick="toggleAutoDetect()"></div>
                        <span id="autoDetectStatus">‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà</span>
                    </div>
                </div>
                <div class="city-input-container" id="cityInputContainer">
                    <div class="setting-item">
                        <div class="setting-label">
                            <span>üèôÔ∏è</span>
                            <span>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á (City Name)</span>
                        </div>
                        <input type="text" class="setting-input" id="settingCityName" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡πÄ‡∏ä‡πà‡∏ô Bangkok">
                        <div style="margin-top: 8px; font-size: 12px; color: var(--text-secondary);">
                            üí° ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
                        </div>
                    </div>
                </div>
                <div class="setting-item" id="manualLocationContainer">
                    <div class="setting-label">
                        <span>üìç</span>
                        <span>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (Latitude)</span>
                    </div>
                    <input type="number" class="setting-input" id="settingLat" step="0.0001" placeholder="18.7883">
                </div>
                <div class="setting-item" id="manualLocationContainer2">
                    <div class="setting-label">
                        <span>üìç</span>
                        <span>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (Longitude)</span>
                    </div>
                    <input type="number" class="setting-input" id="settingLon" step="0.0001" placeholder="98.9853">
                </div>
                <div class="setting-item">
                    <div class="setting-label">
                        <span>üîÑ</span>
                        <span>‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</span>
                    </div>
                    <div class="setting-toggle">
                        <div class="toggle-switch active" id="autoUpdateToggle" onclick="toggleAutoUpdate()"></div>
                        <span id="autoUpdateStatus">‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà</span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-label">
                        <span>‚è±Ô∏è</span>
                        <span>‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó (‡∏ô‡∏≤‡∏ó‡∏µ)</span>
                    </div>
                    <input type="number" class="setting-input" id="settingUpdateInterval" min="1" value="5" placeholder="5">
                </div>
                <div class="action-buttons" style="margin-top: 20px;">
                    <button class="action-btn" onclick="saveSettings()">
                        <span class="action-btn-icon">üíæ</span>
                        <span>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- NEW: City Compare Modal -->
    <div class="modal-overlay" id="cityCompareModal">
        <div class="modal modal-large">
            <div class="modal-header">
                <h3>
                    <span>üåç</span>
                    <span>‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</span>
                </h3>
                <button class="modal-close" onclick="closeCityCompare()">‚úï</button>
            </div>
            <div class="modal-content">
                <div class="city-compare-inputs">
                    <input type="text" class="setting-input" id="compareCity1" placeholder="‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ó‡∏µ‡πà 1 (‡πÄ‡∏ä‡πà‡∏ô Bangkok)" value="Bangkok">
                    <input type="text" class="setting-input" id="compareCity2" placeholder="‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ó‡∏µ‡πà 2 (‡πÄ‡∏ä‡πà‡∏ô Tokyo)" value="Tokyo">
                    <input type="text" class="setting-input" id="compareCity3" placeholder="‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ó‡∏µ‡πà 3 (‡πÄ‡∏ä‡πà‡∏ô New York)" value="New York">
                    <button class="action-btn" onclick="compareCities()">
                        <span class="action-btn-icon">üîç</span>
                        <span>‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö</span>
                    </button>
                </div>
                <div id="compareResults" class="compare-results"></div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>
</body>
</html>
